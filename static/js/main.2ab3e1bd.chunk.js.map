{"version":3,"sources":["Game.js","index.js"],"names":["Square","props","className","onClick","value","Board","useState","Array","fill","board","setBoard","whiteIsNext","setWhiteIsNext","x","y","position","setPosition","renderSquare","j","i","newBoard","JSON","parse","stringify","console","log","calculateWinner","handleClick","status","winner","map","columnIndex","rowIndex","type","class","window","location","reload","Game","arr","chessColor","n1","n2","n3","n4","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2ab3e1bd.chunk.js","sourcesContent":["import './App.css'\nimport { React, useState } from 'react'\nimport { calculateWinner } from './index'\n\nfunction Square(props) {\n  return (\n    <button className=\"square\" onClick={props.onClick}>\n      {props.value}\n    </button>\n  )\n}\n\nfunction Board() {\n  const [board, setBoard] = useState(Array(19).fill(Array(19).fill(null)))\n  const [whiteIsNext, setWhiteIsNext] = useState(true)\n  const [position, setPosition] = useState({\n    x: 0,\n    y: 0\n  })\n\n  const handleClick = (y, x) => {\n    const newBoard = JSON.parse(JSON.stringify(board))\n    console.log('board:', board)\n    console.log('y:', y, 'x:', x) // 這邊的 y 和 x 是最新下的棋子的 x y 值\n    console.log('newBoard:', newBoard) // 這邊的 newBoard 也是有存取到最新的棋盤\n    console.log('這是外面:', newBoard[y][x]) // 想知道為何這邊的值會是 null\n\n    if (\n      calculateWinner(\n        position.y,\n        position.x,\n        newBoard,\n        newBoard[position.y][position.x]\n      ) ||\n      newBoard[y][x] !== null // 如果該位置已有子就不能再下\n    ) {\n      console.log('這是 if:', newBoard[y][x])\n      return\n    }\n    newBoard[y][x] = whiteIsNext ? '⚫' : '⚪'\n\n    const positionX = x\n    const positionY = y\n\n    setPosition({\n      x: positionX,\n      y: positionY\n    })\n\n    setBoard(newBoard)\n    setWhiteIsNext(!whiteIsNext)\n  }\n\n  function renderSquare(j, i) {\n    return <Square value={board[j][i]} onClick={() => handleClick(j, i)} />\n  }\n\n  const winner = calculateWinner(\n    position.y,\n    position.x,\n    board,\n    board[position.y][position.x]\n  )\n\n  let status\n  if (winner) {\n    status = `Winner: ${winner}`\n  } else {\n    status = 'Next player: ' + (whiteIsNext ? '⚫' : '⚪')\n  }\n\n  return (\n    <div>\n      {board.map((y, columnIndex) => {\n        return (\n          <div className=\"board-row\" key={columnIndex}>\n            {board.map((x, rowIndex) => renderSquare(columnIndex, rowIndex))}\n          </div>\n        )\n      })}\n      <div className=\"status\">\n        <div>{status}</div>\n        <button\n          type=\"button\"\n          class=\"btn btn-dark\"\n          value=\"重新整理\"\n          onClick={() => window.location.reload()}\n        >\n          restart\n        </button>\n      </div>\n    </div>\n  )\n}\n\nfunction Game() {\n  return (\n    <div className=\"gameBoard\">\n      <h1>Gomoku</h1>\n      <Board />\n    </div>\n  )\n}\n\nexport default Game\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport Game from './Game'\n\nReactDOM.render(<Game />, document.getElementById('root'))\n\n// 勝利條件\nexport function calculateWinner(y, x, arr, chessColor) {\n  let n1 = 0\n  let n2 = 0\n  let n3 = 0\n  let n4 = 0\n\n  // 左右\n  // 往左找\n  for (let i = x - 1; i >= 0; i--) {\n    if (arr[y][i] !== chessColor) {\n      break\n    }\n    n1++\n  }\n  // 往右找\n  for (let i = x + 1; i < 19; i++) {\n    if (arr[y][i] !== chessColor) {\n      break\n    }\n    n1++\n  }\n\n  // 上下\n  //往上找\n  for (let i = y - 1; i >= 0; i--) {\n    if (arr[i][x] !== chessColor) {\n      break\n    }\n    n2++\n  }\n  // 往下找\n  for (let i = y + 1; i < 19; i++) {\n    if (arr[i][x] !== chessColor) {\n      break\n    }\n    n2++\n  }\n\n  //左上右下\n  // 左上\n  for (let i = x - 1, j = y - 1; i && j >= 0; i--, j--) {\n    if (i < 0 || j < 0 || arr[j][i] !== chessColor) {\n      break\n    }\n    n3++\n  }\n\n  // 右下\n  for (let i = x + 1, j = y + 1; i && j < 19; i++, j++) {\n    if (i >= 19 || j >= 19 || arr[j][i] !== chessColor) {\n      break\n    }\n    n3++\n  }\n\n  // 右上左下\n  // 右上\n  for (let i = x, j = y; i >= 0 && j < 19; i--, j++) {\n    if (i < 0 || j >= 19 || arr[j][i] !== chessColor) {\n      break\n    }\n    n4++\n  }\n\n  // 左下\n  for (let i = x, j = y; i < 19 && j >= 0; i++, j--) {\n    if (i >= 19 || j < 0 || arr[j][i] !== chessColor) {\n      break\n    }\n    n4++\n  }\n\n  if (n1 >= 4 || n2 >= 4 || n3 >= 4 || n4 >= 6) {\n    return chessColor\n  }\n  return null\n}\n"],"sourceRoot":""}